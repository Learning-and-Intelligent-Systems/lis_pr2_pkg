#!/usr/bin/env python
#Author: Ariel Anders  #XXX <- that is not you
from lis_pr2_pkg.uber_controller import Uber
import rospy
"""
Your code is over 80 charaters wide and has a lot of commented or
unnecessary functions

Did not meet naming guidelines of scripts/dance_[yourname].py



"""




#XXX dont need these:
"""
def test_gripper():
    rospy.loginfo("testing open gripper commands")
    uc.close_gripper('l')
    uc.close_gripper('r')
    rospy.loginfo("grippers should be closed")
    uc.open_gripper('l')
    uc.open_gripper('r')
    rospy.loginfo("grippers should be open")

def test_head():
    rospy.loginfo("testing head command")
    uc.look_down_center()
    raw_input("look up")
    uc.look_forward()

def test_torso():
    rospy.loginfo("testing torso command")
    uc.lift_torso()
    raw_input("move torso down")
    uc.down_torso()

def test_joint():
    rospy.loginfo("testing joint control")
    uc.move_arm_to_side("l")
    uc.move_arm_to_side("r")

def test_gripper_event(): 
    rospy.loginfo("requesting gripper event!-- right")
    print uc.wait_for_gripper_event('r')
    rospy.loginfo("requesting gripper event!-- left")
    uc.wait_for_gripper_event('l')

def test_get_state():
    print "testing gathering state information"
    raw_input("get joint angles-- left")
    print uc.get_joint_positions('l')

    raw_input("get joint angles-- right")
    print uc.get_joint_positions('r')

    raw_input("get cartesian pose-- left")
    print uc.return_cartesian_pose('l', 'base_link')

    raw_input("get cartesian pose--right")
    print uc.return_cartesian_pose('r', 'base_link')

def test_custom_joint():
    rospy.loginfo("sending joints to 0!")
    uc.command_joint_pose('l', [0]*7, time=2, blocking=False)
    uc.command_joint_pose('r', [0]*7, time=2, blocking=True)
"""


rospy.init_node("ubertest")
rospy.loginfo("how to use uber controller")

uc = Uber()

#while True:
#    raw_input('Continue?')
#    print '(%s, %s),'%(uc.get_joint_positions('l'), uc.get_joint_positions('r'))

#while True:
#    raw_input('')
#    print str(uc.get_head_pose()) + ','
#    print

#quit()

pairs = [

([1.5050495098993175, 1.164516297235906, 3.2029045490308374, -0.30355738860951575, 6.311830692002684, -0.21958145501746185, -3.1308895593770716], [-1.6120566599670216, 1.054279482729771, -3.1617526294150404, -0.5308474054816542, -0.12253394020707617, -0.14649225178219372, -18.89834857990731]),

([1.4844886687947851, 1.1497967806157308, 3.2025838393780983, -0.31311225556082867, 6.311830692002684, -0.21958145501746185, -3.1308895593770716], [-1.0880039316535146, -0.06702622301977572, -1.8975151783148576, -0.46613489749321735, 0.02457120190819917, -0.17050917567716806, -18.908355631530217]),

([1.484322855560071, 1.148866236461582, 3.2025838393780983, -0.31311225556082867, 6.311830692002684, -0.21958145501746185, -3.1308895593770716], [0.6724351813047212, -0.12125156872973114, -1.8890163725172537, -0.18730650736854326, 0.024281966473446485, -0.21071141784919523, -18.89321452733556]),

([0.697953589929061, -0.020912360226817014, 2.811318063035576, -0.050208643688342214, 5.5286968288659954, -0.25578087654032466, -3.1299323631348805], [-1.7185916632707483, 0.9131751509915403, -3.0066895123153605, -0.437759838062046, -0.5551144564233675, -0.34389222227405203, -18.879857288864983]),

([-0.5987059055341968, -0.200761166746888, 2.815487288521193, -0.09103398429849707, 5.467610305046204, -0.47863356529044676, -3.2011999742580164], [-1.7478576991977643, 1.2236385187848893, -3.0092551895372788, -0.16486704710409594, -0.5549987622494665, -0.34389222227405203, -18.879857288864983]),

#([1.4467661578973563, 0.009457217167682188, 1.4911167775323024, -1.658466476447952, 5.836906108138582, -0.36472721246970874, -2.522199767183746], [-1.5377723308151623, 0.23886901892593237, -1.7769283488847032, -1.7806529568556493, -0.2754237910174076, -0.2142791492973598, -18.98284290274072]),



([1.421148013134048, -0.3538779775659505, 0.009919246353663258, -0.4507892020865635, 6.29603843726518, -0.2716181234565769, -3.0995631369053642], [-1.5305594551051047, -0.35397220219008596, -0.0038850337128712997, -0.40663413511458746, -0.010137050262137015, -0.08592783500355605, -22.119662006241082]),

([1.559353344268143, -0.3537933826428461, 0.020181955241336036, -1.5559688127884144, 6.395246191385392, -2.0069278927088, -2.809880746882264],
[-1.5075114154798626, -0.3543105818825038, 0.0036516431265136706, -1.6869863065905069, -0.006029907088647298, -2.010283862088519, -22.0641011152739]),

([1.5667320332129149, 1.2968227569712731, 0.11863981863244599, -1.386587080469687, 6.190814586102111, -0.08405116890722497, -3.2587622755497794], [-1.5725931101050965, -0.3549873412673394, -0.00452645301835064, -1.5513361500241416, -0.0061456012625483725, -0.8572539705291665, -22.129059932982592]),

([1.5063760157770294, -0.3534550029504284, -0.0219913640939442, -1.655715832931665, 6.276833204397595, -0.10223789750885592, -3.351436275361916],
[-1.6092378349768839, -0.3543951768056082, -0.06369738394883862, -1.7427230304731651, 0.08450078398897998, -0.10511526876747912, -22.08655171804529]),
]

[
(0.023686680738496228, 0.005759586531580929), # center

(-0.7988869957264314, -0.0008377580409574629), # right straight

(0.7673016618432003, -0.0075398223686156856), # left straight

(0.3952323719030491, -0.005969026041820591), # half l s

(-0.36398585271448425, -0.02157226955465023), # half r s

(0.01970733004394916, -0.4152138290494512), # center up

(0.09856130564905297, 0.43102651207251935), # center down
]


pairs += pairs[-1:] + pairs[:1]

print pairs
print len(pairs)

timings = len(pairs)*[2]
timings = [2, 1, 2, 1, 2, 1, 1, 1, 1, 3, 2]

head_poses = [
(0, .4),
(-.8, 0),
(.8, 0),
(.8, .2),
(-.8, 0),
(.4, -.2),
(-.4, -.2),
(.8, .2),
(0, -.4),
(0, -.4),
(0, .4),
]


for (l, r), h, t in zip(pairs, head_poses, timings):
    uc.command_head(h, t, blocking=False)
    uc.command_joint_pose('l', l, t, blocking=False)
    uc.command_joint_pose('r', r, t, blocking=True)
